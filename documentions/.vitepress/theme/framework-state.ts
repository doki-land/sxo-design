import { ref, watch } from 'vue';

const STORAGE_KEY = 'sxo-framework-preference';

// æ”¯æŒçš„æ¡†æž¶åˆ—è¡¨
export const frameworks = [
    { id: 'vue', name: 'Vue 3', icon: 'ðŸŸ¢' },
    { id: 'react', name: 'React', icon: 'ðŸ”µ' },
    { id: 'solid', name: 'Solid', icon: 'ðŸ’Ž' },
    { id: 'vue2', name: 'Vue 2', icon: 'ðŸŽ¾' },
];

// å…¨å±€å“åº”å¼çŠ¶æ€
export const currentFramework = ref('vue');

// åˆå§‹åŒ–åŠ è½½åå¥½
if (typeof window !== 'undefined') {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved && frameworks.some((f) => f.id === saved)) {
        currentFramework.value = saved;
    }
}

// ç›‘å¬å¹¶æŒä¹…åŒ–
watch(currentFramework, (val) => {
    if (typeof window !== 'undefined') {
        localStorage.setItem(STORAGE_KEY, val);
    }
});
